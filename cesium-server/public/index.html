<!DOCTYPE html>
<html>
<head>
    <title>Cesium Demo</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.82/Build/Cesium/Cesium.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.82/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
</head>
<body>
    <div id="cesiumContainer" style="width: 100%; height: 100vh;"></div>
    <script>
        const viewer = new Cesium.Viewer('cesiumContainer', {
            terrainProvider: Cesium.createWorldTerrain()
        });

        const socket = io('http://localhost:4000');

        const entity = viewer.entities.add({
            position: Cesium.Cartesian3.fromDegrees(0, 0),
            point: {
                pixelSize: 10,
                color: Cesium.Color.RED,
            },
        });

        socket.on('gpsPosition', function(data) {
            const position = Cesium.Cartesian3.fromDegrees(data.longitude, data.latitude);
            entity.position = position;
            viewer.scene.requestRender();
        });
    </script>
</body>
</html>
